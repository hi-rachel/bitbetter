---
title: "í™(Heap)"
date: "2025-06-28"
description: "Pythonìœ¼ë¡œ ë°°ìš°ëŠ” í™ ìë£Œêµ¬ì¡°"
tags: ["Heap", "Python"]
category: "Docs"
---

# í™(Heap) ìë£Œêµ¬ì¡°

<b>í™(Heap)</b>ì€ ì™„ì „ ì´ì§„ íŠ¸ë¦¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ <b>
  ìš°ì„ ìˆœìœ„ í(priority queue)
</b>ë¥¼ êµ¬í˜„í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ìë£Œêµ¬ì¡°ì…ë‹ˆë‹¤. ê°€ì¥ í° ê°’ì´ë‚˜ ê°€ì¥ ì‘ì€ ê°’ì„ ë¹ ë¥´ê²Œ
ì°¾ì•„ì•¼ í•˜ëŠ” ìƒí™©ì—ì„œ ìœ ìš©í•˜ê²Œ ì“°ì…ë‹ˆë‹¤.

---

## í™ì˜ ì¢…ë¥˜

<table>
  <thead>
    <tr>
      <th>í™ ì¢…ë¥˜</th>
      <th>ì„¤ëª…</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <strong>ìµœì†Œ í™</strong>
      </td>
      <td>ë¶€ëª¨ ë…¸ë“œ â‰¤ ìì‹ ë…¸ë“œ. ë£¨íŠ¸ëŠ” ê°€ì¥ ì‘ì€ ê°’</td>
    </tr>
    <tr>
      <td>
        <strong>ìµœëŒ€ í™</strong>
      </td>
      <td>ë¶€ëª¨ ë…¸ë“œ â‰¥ ìì‹ ë…¸ë“œ. ë£¨íŠ¸ëŠ” ê°€ì¥ í° ê°’</td>
    </tr>
  </tbody>
</table>

---

## ë™ì‘ ê³¼ì •

í™ì€ ì‚½ì…/ì‚­ì œ ì‹œ ë‹¤ìŒ ê·œì¹™ì„ ë”°ë¦…ë‹ˆë‹¤:

- **ì‚½ì…:** ë§ˆì§€ë§‰ ìœ„ì¹˜ì— ì¶”ê°€ í›„, ë¶€ëª¨ì™€ ë¹„êµí•˜ë©° "ì˜¬ë¼ê° (heapify-up)"
- **ì‚­ì œ:** ë£¨íŠ¸ ì œê±° í›„ ë§ˆì§€ë§‰ ê°’ì„ ë£¨íŠ¸ì— ë„£ê³ , ìì‹ê³¼ ë¹„êµí•˜ë©° "ë‚´ë ¤ê° (heapify-down)"

ì´ë¡œ ì¸í•´ ì‚½ì…/ì‚­ì œ ëª¨ë‘ ì‹œê°„ë³µì¡ë„ëŠ” <b>O(log n)</b>ì…ë‹ˆë‹¤.

---

## Pythonì—ì„œì˜ í™ ì‚¬ìš©

Pythonì˜ í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ `heapq`ëŠ” <b>ìµœì†Œ í™(min-heap)</b>ë§Œ ì œê³µí•©ë‹ˆë‹¤.  
ìµœëŒ€ í™ì²˜ëŸ¼ ì“°ë ¤ë©´ **ê°’ì„ ìŒìˆ˜ë¡œ ë°”ê¿” ì €ì¥**í•´ì•¼ í•©ë‹ˆë‹¤.

```python
import heapq

# ìµœì†Œ í™ ì˜ˆì‹œ
min_heap = []
heapq.heappush(min_heap, 3)
heapq.heappush(min_heap, 1)
heapq.heappush(min_heap, 5)

print(heapq.heappop(min_heap))  # 1 (ê°€ì¥ ì‘ì€ ê°’ë¶€í„° ë‚˜ì˜´)

# ìµœëŒ€ í™ ì˜ˆì‹œ (ìŒìˆ˜ë¡œ ì €ì¥)
max_heap = []
heapq.heappush(max_heap, -3)
heapq.heappush(max_heap, -1)
heapq.heappush(max_heap, -5)

print(-heapq.heappop(max_heap))  # 5 (ê°€ì¥ í° ê°’)
```

---

## ì£¼ìš” í•¨ìˆ˜ ì •ë¦¬

<table>
  <thead>
    <tr>
      <th>í•¨ìˆ˜</th>
      <th>ì„¤ëª…</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <code>heapq.heappush(heap, x)</code>
      </td>
      <td>xë¥¼ í™ì— ì¶”ê°€</td>
    </tr>
    <tr>
      <td>
        <code>heapq.heappop(heap)</code>
      </td>
      <td>í™ì—ì„œ ìµœì†Œê°’ ì œê±° ë° ë°˜í™˜</td>
    </tr>
    <tr>
      <td>
        <code>heapq.heapify(list)</code>
      </td>
      <td>ë¦¬ìŠ¤íŠ¸ë¥¼ í™ìœ¼ë¡œ ë³€í™˜</td>
    </tr>
    <tr>
      <td>
        <code>heapq.heappushpop(heap, x)</code>
      </td>
      <td>xë¥¼ ì‚½ì…í•˜ê³  ìµœì†Œê°’ì„ ì œê±° í›„ ë°˜í™˜</td>
    </tr>
    <tr>
      <td>
        <code>heapq.nlargest(n, iterable)</code>
      </td>
      <td>nê°œì˜ ê°€ì¥ í° ê°’ ë°˜í™˜</td>
    </tr>
    <tr>
      <td>
        <code>heapq.nsmallest(n, iterable)</code>
      </td>
      <td>nê°œì˜ ê°€ì¥ ì‘ì€ ê°’ ë°˜í™˜</td>
    </tr>
  </tbody>
</table>

---

## ì •ë¦¬

- í™ì€ ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ ë°ì´í„°ë¥¼ ë¹ ë¥´ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” **ì™„ì „ ì´ì§„ íŠ¸ë¦¬ ê¸°ë°˜ êµ¬ì¡°**ì…ë‹ˆë‹¤.
- Pythonì—ì„œëŠ” `heapq`ë¡œ ìµœì†Œ í™ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê³ , ìµœëŒ€ í™ì€ ìŒìˆ˜ë¡œ ë³€í™˜í•˜ì—¬ êµ¬í˜„í•©ë‹ˆë‹¤.
- ì‚½ì…/ì‚­ì œ ì‹œê°„ ë³µì¡ë„ëŠ” O(log n)ìœ¼ë¡œ íš¨ìœ¨ì ì…ë‹ˆë‹¤.

---

## ë” ì•Œì•„ë‘ë©´ ì¢‹ì€ í™ ê´€ë ¨ ê°œë…

### ì‚¬ìš©ì ì •ì˜ ìš°ì„ ìˆœìœ„ (íŠœí”Œ í™œìš©)

í™ì— `(ìš°ì„ ìˆœìœ„, ê°’)` í˜•íƒœì˜ íŠœí”Œì„ ì‚½ì…í•˜ë©´, ì²« ë²ˆì§¸ ìš”ì†Œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìë™ ì •ë ¬ë©ë‹ˆë‹¤.  
ì´ ë°©ë²•ì€ ë‹¤ìµìŠ¤íŠ¸ë¼ ì•Œê³ ë¦¬ì¦˜, A\* íƒìƒ‰, ì‘ì—… ìŠ¤ì¼€ì¤„ë§ ë“± ë‹¤ì–‘í•œ ë¬¸ì œì— ì‚¬ìš©ë©ë‹ˆë‹¤.

```python
import heapq

tasks = []
heapq.heappush(tasks, (2, "write"))
heapq.heappush(tasks, (1, "eat"))
heapq.heappush(tasks, (3, "code"))

print(heapq.heappop(tasks))  # (1, 'eat')
```

### ìµœëŒ€ í™ ì»¤ìŠ¤í„°ë§ˆì´ì§•: í´ë˜ìŠ¤ ë¹„êµ ì—°ì‚°ì ì¬ì •ì˜

```python
class MaxItem:
    def __init__(self, val):
        self.val = val
    def __lt__(self, other):
        return self.val > other.val

heap = []
heapq.heappush(heap, MaxItem(5))
heapq.heappush(heap, MaxItem(2))
print(heapq.heappop(heap).val)  # 5
```

---

## í™ ì •ë ¬ (Heap Sort)

í™ì„ ì´ìš©í•œ ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ë„ ì¡´ì¬í•©ë‹ˆë‹¤.

```python
import heapq

def heap_sort(iterable):
    h = []
    for value in iterable:
        heapq.heappush(h, value)
    return [heapq.heappop(h) for _ in range(len(h))]

print(heap_sort([4, 1, 7, 3, 8]))  # [1, 3, 4, 7, 8]
```

ì‹œê°„ ë³µì¡ë„ëŠ” O(n log n), ê³µê°„ ë³µì¡ë„ëŠ” O(n)ì…ë‹ˆë‹¤.

---

## í™ì„ í™œìš©í•˜ëŠ” ëŒ€í‘œ ë¬¸ì œë“¤

### ğŸ”— [Kth Largest Element in an Array - LeetCode 215](https://leetcode.com/problems/kth-largest-element-in-an-array/)

ìµœì†Œ í™ì„ ì‚¬ìš©í•˜ì—¬ kê°œì˜ ê°€ì¥ í° ê°’ì„ ìœ ì§€í•˜ë©´ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ğŸ”— [Find Median from Data Stream - LeetCode 295](https://leetcode.com/problems/find-median-from-data-stream/)

ë‘ ê°œì˜ í™(ìµœëŒ€ í™ + ìµœì†Œ í™)ì„ ìœ ì§€í•˜ì—¬ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¤‘ì•™ê°’ì„ êµ¬í•˜ëŠ” ë¬¸ì œì…ë‹ˆë‹¤.

### ğŸ”— [Merge k Sorted Lists - LeetCode 23](https://leetcode.com/problems/merge-k-sorted-lists/)

ê° ë¦¬ìŠ¤íŠ¸ì˜ í˜„ì¬ ë…¸ë“œ ê°’ì„ í™ì— ë„£ê³  ë³‘í•©í•´ë‚˜ê°€ëŠ” ë¬¸ì œì…ë‹ˆë‹¤. ìš°ì„ ìˆœìœ„ íì˜ ëŒ€í‘œì ì¸ ì‘ìš©ì…ë‹ˆë‹¤.

---
